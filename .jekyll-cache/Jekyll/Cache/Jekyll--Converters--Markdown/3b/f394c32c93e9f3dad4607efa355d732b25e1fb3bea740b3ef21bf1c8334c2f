I"İ3
<h4 id="åˆ›å»ºä¸å¯åŠ¨">åˆ›å»ºä¸å¯åŠ¨</h4>

<hr />

<h5 id="ç»§æ‰¿è‡ªthreadç±»">ç»§æ‰¿è‡ªThreadç±»</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="kd">extends</span> <span class="nc">Thread</span><span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">50</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç»§æ‰¿çº¿ç¨‹"</span><span class="o">+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="åŒ¿åç±»">åŒ¿åç±»</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//åˆ›å»ºåä¸ªçº¿ç¨‹å¹¶å¯åŠ¨</span>
<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
    <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">;</span><span class="n">j</span><span class="o">++){</span>
                <span class="k">try</span><span class="o">{</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
                <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
            <span class="o">}</span>
       <span class="o">}</span>
    <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
<hr />

<h4 id="å¤šçº¿ç¨‹å–ç«è½¦ç¥¨">å¤šçº¿ç¨‹å–ç«è½¦ç¥¨</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//å¤šçº¿ç¨‹å–ç«è½¦ç¥¨</span>
<span class="c1">//ç«è½¦ç¥¨å°±æ˜¯ä¸€ä¸ªæ•°æ®åº“</span>
<span class="kd">class</span> <span class="nc">Ticket</span><span class="o">{</span>
    <span class="c1">//å®šä¹‰é›†åˆå­˜æ”¾ç«è½¦ç¥¨</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">tList</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
    <span class="c1">//æä¾›getteræ–¹æ³•</span>
    <span class="kd">synchronized</span> <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">getIndex</span><span class="o">(){</span>
        <span class="c1">//æ¯æ¬¡å–å®Œç¥¨åï¼Œè¿™ä¸ªå¥½ç å°±æ²¡äº†</span>
        <span class="n">index</span><span class="o">++;</span>
        <span class="k">try</span><span class="o">{</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
        <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">index</span><span class="o">;</span>
    <span class="o">}</span>
   <span class="c1">//getter</span>
   <span class="kd">public</span> <span class="nc">List</span> <span class="nf">getList</span><span class="o">(){</span>
       <span class="k">return</span> <span class="n">tList</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createTicket</span><span class="o">(){</span>
       <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">105</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
           <span class="n">tList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
       <span class="o">}</span>
   <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®</span>
<span class="c1">//çª—å£1</span>
<span class="kd">class</span> <span class="nc">Window1</span> <span class="kd">implements</span> <span class="nc">Runnable</span><span class="o">{</span>
    <span class="c1">//å®šä¹‰ä¸€ä¸ªé›†åˆæ¥å—Ticketçš„æ€»é‡</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">ticketList</span><span class="o">;</span>
    <span class="c1">//ç±»ä¼¼äºæœ¬åœ°æ•°æ®åº“</span>
    <span class="kd">private</span> <span class="nc">Ticket</span> <span class="n">ticket</span><span class="o">;</span>
    <span class="c1">//æä¾›æ„é€ å™¨ä¼ é€’Ticketç±»</span>
    <span class="nc">Window1</span><span class="o">(</span><span class="nc">List</span> <span class="n">ticketList</span><span class="o">,</span><span class="nc">Ticket</span> <span class="n">ticket</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ticketList</span><span class="o">=</span><span class="n">ticketList</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ticket</span><span class="o">=</span><span class="n">ticket</span><span class="o">;</span>
    <span class="o">}</span>
   <span class="c1">//å®ç°çˆ¶ç±»æ¥å£</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
       <span class="c1">//è¿™é‡Œæˆ‘å¹¶ä¸çŸ¥é“è¿™ä¸ªçª—å£ä¼šå–å‡ºå¤šå°‘å¼ ç¥¨ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨whileå¾ªç¯</span>
       <span class="c1">//ä¸ºä»€ä¹ˆè¦æŠŠç›¸åŒçš„ä»£ç éƒ½æå–å‡ºæ¥å‘¢ï¼Œä¾¿äºä¿®æ”¹å’Œç»´æŠ¤</span>
       <span class="cm">/**
       * å°±æ¯”å¦‚è¿™é‡Œï¼ŒgetIndexæˆ‘ä½¿ç”¨äº†ä¸¤æ¬¡
       * è¿™æ˜æ˜¾æ˜¯é”™è¯¯ï¼Œæˆ‘åªæœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œæˆ‘åœ¨ä¸¤ä¸ªåœ°æ–¹ä¿®æ”¹
       * å¦‚æœæˆ‘æœ‰å‡ ç™¾ä¸ªçº¿ç¨‹å‘¢ï¼Œæˆ‘ä¸ç´¯æ­»
       */</span>
       <span class="nc">Integer</span> <span class="n">num</span><span class="o">;</span>
       <span class="k">while</span><span class="o">((</span><span class="n">num</span><span class="o">=</span><span class="n">ticket</span><span class="o">.</span><span class="na">getIndex</span><span class="o">())&lt;</span><span class="mi">100</span><span class="o">){</span>
           <span class="kt">int</span> <span class="n">ticketNumber</span><span class="o">=</span><span class="n">ticketList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
           <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"w1 this ticket number is "</span><span class="o">+</span><span class="n">ticketNumber</span><span class="o">);</span>
           <span class="k">try</span> <span class="o">{</span>
               <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
           <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
               <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
           <span class="o">}</span>
       <span class="o">}</span>
   <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Window2</span> <span class="kd">implements</span> <span class="nc">Runnable</span><span class="o">{</span>
    <span class="c1">//å®šä¹‰ä¸€ä¸ªé›†åˆæ¥å—Ticketçš„æ€»é‡</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">ticketList</span><span class="o">;</span>
    <span class="c1">//ç±»ä¼¼äºæœ¬åœ°æ•°æ®åº“</span>
    <span class="kd">private</span> <span class="nc">Ticket</span> <span class="n">ticket</span><span class="o">;</span>
    <span class="c1">//æä¾›æ„é€ å™¨ä¼ é€’Ticketç±»</span>
    <span class="nc">Window2</span><span class="o">(</span><span class="nc">List</span> <span class="n">ticketList</span><span class="o">,</span><span class="nc">Ticket</span> <span class="n">ticket</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ticketList</span><span class="o">=</span><span class="n">ticketList</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ticket</span><span class="o">=</span><span class="n">ticket</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//å®ç°çˆ¶ç±»æ¥å£</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="c1">//å–å¾—ç«è½¦ğŸ«</span>
        <span class="c1">//è¿™é‡Œæˆ‘å¹¶ä¸çŸ¥é“è¿™ä¸ªçª—å£ä¼šå–å‡ºå¤šå°‘å¼ ç¥¨ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨whileå¾ªç¯</span>
        <span class="nc">Integer</span> <span class="n">num</span><span class="o">;</span>
        <span class="k">while</span><span class="o">((</span><span class="n">num</span><span class="o">=</span><span class="n">ticket</span><span class="o">.</span><span class="na">getIndex</span><span class="o">())&lt;</span><span class="mi">100</span><span class="o">){</span>
            <span class="kt">int</span> <span class="n">ticketNumber</span><span class="o">=</span><span class="n">ticketList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"w2 this ticket number is "</span><span class="o">+</span><span class="n">ticketNumber</span><span class="o">);</span>
            <span class="k">try</span><span class="o">{</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
            <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
:ET