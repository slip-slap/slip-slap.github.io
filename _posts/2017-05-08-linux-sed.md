---
layout: post
title: "Linux: Sed"
keywords: [] 
description: "sed"
category: "linux"
tags: ["CLI"]
---
{% include JB/setup %}



#### feature

1. the ability to filter text in a pipeline which particularly distinguishes it from other types of editors




<hr />

#### 语法

命令行格式

```shell
sed [options] 'command' file(s)
# options: -e; -n; -i
# -n: suppress automatic printing of **pattern space**
# what's the crap, what's the pattern space ? it's every text line that the sed command take in
# command: 行定位(正则)+sed命令
#  行定位可以使用行号,或者正则
# 定位一行: x; /pattern/
# 定位几行: x,y; /pattern/,/pattern/;
# 反向选择: x,y!
# 间隔行: first~step
```

<hr />
##### 增删改查

1. a 在指定行之后插入

```shell
nl passwd | sed -n '1,3a ========================'
```

2. i在指定行之间插入

```shell
nl passwd | sed -n '1,3i ========================'
```

3. 替换指定行

```shell
nl passwd | sed -n '1,3c  ========================'
```

##### 替换行内容

这是sed核心的命令

```shell
# 在使用替换命令的时候，注意参数的设置
cat temp | grep 'slipslap' | sed 's/slipslap//' | sed 's/\/.*est//' | sed 's/13.*//'

# batch substitution
# find the target
sed -n '/category: "statitics"/p' *
# replace the target
sed -i 's/category: "statitics"/category: "math"/' *
```


####

脚本格式

```shell
sed -f scripgfile file(s)
```

#### 版本差异
1. in practice, you can discard the BSD based command, actually I prefer GNU style command 
2. For mac system, when you use -i parameter, you have to provide an extension for your backups.

3. explaination based on BSD platform such as Maca <br />
i extension
   Edit files in-place, saving backups with the specified extension.  If a zero-length extension is given, no backup will be saved.  It is not recommended to give a zero-length extension when in-place editing files, as you risk corruption or partial content in situations where disk space is exhausted, etc.

4. explatination based on GNU/linux platform such as Redhat <br />
   -i[SUFFIX], --in-place[=SUFFIX]
   edit files in place (makes backup if SUFFIX supplied)




```shell
sed -i 'jjj'  '1,5d' 2016-08-01-python-intro.md
```
